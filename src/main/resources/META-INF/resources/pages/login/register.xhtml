<!DOCTYPE HTML>
<HTML xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets"
      xml:lang="#{langBean.languageCode}"
      xmlns:form="http://java.sun.com/jsf/composite/pages/shared/form"
>

<h:head>
    <title>Inscription</title>
</h:head>

<h:body>
    <h1>Inscription</h1>
    <h:outputText value="Invitation à rejoindre #{registerBean.institution.name}"/>
    <form:csrfform formId="registerForm">
        <p:messages id="messages" closable="true" showDetail="true">
            <p:autoUpdate/>
        </p:messages>
        <h:panelGroup>
            <h:outputLabel for="lastname" value="Nom"/>
            <h:inputText id="lastname" value="#{registerBean.lastName}" required="true"/>
            <h:message for="lastname"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel for="firstname" value="Prénom"/>
            <h:inputText id="firstname" value="#{registerBean.firstName}" required="true"/>
            <h:message for="firstname"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel for="email" value="Email"/>
            <h:inputText id="email" value="#{registerBean.email}" disabled="true" required="true"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel for="username" value="Nom d'utilisateur"/>
            <h:inputText id="username" value="#{registerBean.username}" required="true"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel for="password" value="Mot de passe"/>
            <h:inputSecret id="password" value="#{registerBean.password}" required="true"/>
            <h:message for="password"/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputLabel for="password-confirm" value="Confirmation du mot de passe"/>
            <h:inputSecret id="password-confirm" value="#{registerBean.confirmPassword}" required="true"/>
            <h:message for="password-confirm"/>
        </h:panelGroup>

        <h:panelGroup>
            <ul>
                <ui:repeat value="#{registerBean.institutionTeams.keySet()}" var="institution">
                    <li>
                        Vous avez été invité à rejoindre #{institution.name} dans les groupes #{registerBean.getTeamsName(institution)}
                    </li>
                </ui:repeat>
            </ul>
        </h:panelGroup>

        <h:commandButton value="S'inscrire" action="#{registerBean.register}"/>
    </form:csrfform>
</h:body>
</HTML>